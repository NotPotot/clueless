package org.firstinspires.ftc.teamcode;

import com.qualcomm.hardware.limelightvision.Limelight3A;
import java.util.Arrays;
import com.qualcomm.robotcore.eventloop.opmode.Autonomous;
import com.qualcomm.robotcore.eventloop.opmode.LinearOpMode;

import java.util.Collections;
import java.util.List;

@Autonomous(name = "justinz")
public class justinz extends LinearOpMode {
	// welcome to the thunderdome chat 3: now its personal
	@Override
	public void runOpMode() {
		AutonomousMovement autonomousMovement = new AutonomousMovement(hardwareMap, telemetry);
		AutonomousMovement.Movement movement = autonomousMovement.movement();
		AutonomousMovement.Movement.EncoderBased encoderBased = movement.encoderBased();
		AutonomousMovement.Module module = autonomousMovement.module();
		AutonomousMovement.Module.ModeChange modeChange = module.modeChange();
		AutonomousMovement.Module.Limelight limelightHelper = module.limelight();
		AutonomousMovement.Module.Intake intake = module.intake();
		AutonomousMovement.Module.Colorsense colorsense = module.colorsense();
		Limelight3A limelight = autonomousMovement.limelightDevice();
		limelight.pipelineSwitch(0);
		autonomousMovement.startLimelight();
		List<Integer> sequence;

		modeChange.resetEncoders();
		modeChange.runWithoutEncoders();
		
		waitForStart();
		
		if (opModeIsActive()) {
		
			encoderBased.slide(.4, -22);//-18
			module.waited(100);
			encoderBased.drive(.2, 65);
			module.waited(100);
			encoderBased.rotate(.3, 4.5);
			autonomousMovement.startLimelight();
			sequence = limelightHelper.getMonolithSequence(limelightHelper.getResults());
			autonomousMovement.stopLimelight();
			module.waited(1000);
			
			if (List.of(0, 0, 1).equals(sequence)) {
				encoderBased.drive(.4, 30);
				encoderBased.rotate(.4, -15);
				encoderBased.drive(.4, 10);
				module.shoot(1500);
				module.waited(3000);
				module.kick();
				module.changeBalls(1);
				module.waited(3000);
				
				module.kick();
				module.changeBalls(1);
				module.waited(3000);
				
				module.kick();
				module.shoot(0);
				module.waited(1000);
			}else if (List.of(0, 1, 0).equals(sequence)) {
				encoderBased.drive(.4, 30);
				encoderBased.rotate(.4, -15);
				encoderBased.drive(.4, 10);
				module.shoot(1500);
				module.waited(3000);
				
				module.kick();
				module.changeBalls(-1);
				module.waited(3000);
				
				module.kick();
				module.changeBalls(-1);
				module.waited(3000);
				module.kick();
				
				module.shoot(0);
				module.waited(1000);
			}else if(List.of(1, 0, 0).equals(sequence)){
				encoderBased.drive(.4, 30);
				encoderBased.rotate(.4, -15);
				encoderBased.drive(.4, 10);
				module.changeBalls(-1);
				module.shoot(1500);
				module.waited(3000);
				
				module.kick();
				module.changeBalls(-1);
				module.waited(3000);
	
				module.kick();
				module.changeBalls(-1);
				module.waited(3000);
				module.kick();
				
				module.shoot(0);
				module.waited(1000);
			}else{
				encoderBased.drive(.5, -10);
			}
			
	
		}
	}
}
